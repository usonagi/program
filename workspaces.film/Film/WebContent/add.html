<!DOCTYPE HTML>
<html>
<head>
<title>Home</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="Movie_store Responsive web template, Bootstrap Web Templates, Flat Web Templates, Andriod Compatible web template, 
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyErricsson, Motorola web design" />
<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
<link href="css/bootstrap.css" rel='stylesheet' type='text/css' />
<link href="css/style.css" rel="stylesheet" type="text/css" media="all" />
<link href="css/add.css" rel="stylesheet" type="text/css"/>
<!-- start plugins -->
<script type="text/javascript" src="js/jquery-1.11.1.min.js"></script>
 <script src="js/responsiveslides.min.js"></script>
<script>
    $(function () {
      $("#slider").responsiveSlides({
      	auto: true,
      	nav: true,
      	speed: 500,
        namespace: "callbacks",
        pager: true,
      });
    });
</script>
</head>
<body>
<div id="yc_add" class="container">
	<div class="container_wrap">
		<div class="header_top">
		    <div class="col-sm-3 logo"><a href="index.html"><img src="images/logo.png" alt=""/></a></div>
		    <div class="col-sm-6 nav">
			  <ul>
				 <li> <span class="simptip-position-bottom simptip-movable" data-tooltip="comic"><a href="movie.html"> </a></span></li>
				 <li><span class="simptip-position-bottom simptip-movable" data-tooltip="movie"><a href="movie.html"> </a> </span></li>
				 <li><span class="simptip-position-bottom simptip-movable" data-tooltip="video"><a href="movie.html"> </a></span></li>
				 <li><span class="simptip-position-bottom simptip-movable" data-tooltip="game"><a href="movie.html"> </a></span></li>
				 <li><span class="simptip-position-bottom simptip-movable" data-tooltip="tv"><a href="movie.html"> </a></span></li>
				 <li><span class="simptip-position-bottom simptip-movable" data-tooltip="more"><a href="movie.html"> </a></span></li>
			 </ul>
			</div>
			<div class="col-sm-3 header_right">
			   <ul class="header_right_box">
				 <li><img src="images/p1.png" alt=""/></li>
				 <li><p><a href="login.html">Carol Varois</a></p></li>
				 <li class="last"><i class="edit"> </i></li>
				 
			   </ul>
			</div>
			<div class="clearfix"> </div>
	      </div>
	</div>      
	    
      <div class="content">
      	<div class="box_1">
      	 <h1 class="m_2">浏览电影</h1>
		 <div class="clearfix"> </div>
		</div>
		 <div class="yc_movie">
		 	<div class="movie_head">
		 		<ul>
		 			<li class="yc_col1">编号</li>
		 			<li class="yc_col2">电影名称</li>
		 			<li class="yc_col3">电影类型</li>
		 			<li class="yc_col4">电影导演</li>
		 			<li class="yc_col5">电影主演</li>
		 			<li class="yc_col6">出品时间</li>
		 			<li class="yc_col7">图片</li>
		 			<li class="yc_col8">操作</li>
		 		</ul>
		 	</div>
		 	<div class="movie_body">
			 	<ul v-for=" film in films ">
		        	<li class="yc_col1">{{film.fid}}</li>
		        	<li class="yc_col2">{{film.fname}}</li>
		            <li class="yc_col3">{{film.ftype}}</li>
		            <li class="yc_col4">{{film.director}}</li>
		            <li class="yc_col5">{{film.actors}}</li>
		            <li class="yc_col6">
		            	 {{film.fyear}}
		            </li>
		            <li class="yc_col7"><img :scr="film.fimage" width="100"/></li>
		            <li class="yc_col8"><a href="javascript:void(0)" @click="deleteFilm(film.fid)">删除</a></li>
	        	</ul>
	        	
	        	
	        	
	        	
		 	
		 	</div>
		 </div>
		 </div>
       <div class="content">
      	<div class="box_1">
      	 <h1 class="m_2">添加电影</h1>
		 <div class="clearfix"> </div>
		</div>
		 <div class="add_movie">
		 	<form action="user.action" method="post">
		 	<ul>
		 		<li><label>电影名称:</label><input type="text" v-model="fname"/></li>
		 		<li><label>电影类型:</label><input type="text" v-model="ftype"/></li>
		 		<li><label>电影导演:</label><input type="text" v-model="director"/></li>
		 		<li><label>电影主演:</label><input type="text" v-model="actors"/></li>
		 		<li><label>出品时间:</label><input type="text" v-model="fyear"/></li>
		 		<li><label>上映时间:</label><input type="text" v-model="fdate"/></li>
		 		<li><label>电影时长:</label><input type="text" v-model="flength"/></li>
		 		<li><label>制片地区:</label><input type="text" v-model="farea"/></li>
		 		<li><label>电影图片:</label><input type="file" v-model="fimage"/></li>
		 		<li><label>电影描述:</label><textarea v-model="fdis"></textarea></li>
		 	</ul>
		 	<div class="btn">
		 		<a href="javascript:void(0)" @click="add()">添加</a>
		 	</div>
		 	</form>
		 
		 </div>
		</div> 
      </div>
 
 
<div class="container"> 
 <footer id="footer">
 	<div id="footer-3d">
		<div class="gp-container">
			<span class="first-widget-bend"></span>
		</div>		
	</div>
    <div id="footer-widgets" class="gp-footer-larger-first-col">
		<div class="gp-container">
            <div class="footer-widget footer-1">
            	<div class="wpb_wrapper">
					<img src="images/f_logo.png" alt=""/>
				</div> 
	          <br>
	          <p>It is a long established fact that a reader will be distracted by the readable content of a page.</p>
			  <p class="text">There are many variations of passages of Lorem Ipsum available, but the majority have suffered.</p>
			 </div>
			 <div class="footer_box">
			  <div class="col_1_of_3 span_1_of_3">
					<h3>Categories</h3>
					<ul class="first">
						<li><a href="#">Dance</a></li>
						<li><a href="#">History</a></li>
						<li><a href="#">Specials</a></li>
					</ul>
		     </div>
		     <div class="col_1_of_3 span_1_of_3">
					<h3>Information</h3>
					<ul class="first">
						<li><a href="#">New products</a></li>
						<li><a href="#">top sellers</a></li>
						<li><a href="#">Specials</a></li>
					</ul>
		     </div>
		     <div class="col_1_of_3 span_1_of_3">
					<h3>Follow Us</h3>
					<ul class="first">
						<li><a href="#">Facebook</a></li>
						<li><a href="#">Twitter</a></li>
						<li><a href="#">Youtube</a></li>
					</ul>
					<div class="copy">
				      <p>Copyright &copy; 2020.Company name All rights reserved.<a target="_blank" href="http://www.cssmoban.com/">&#x7F51;&#x9875;&#x6A21;&#x677F;</a> - More Templates <a href="http://www.cssmoban.com/" target="_blank" title="模板之家">模板之家</a></p>
			        </div>
		     </div>
		    <div class="clearfix"> </div>
	        </div>
	        <div class="clearfix"> </div>
		</div>
	</div>
  </footer>
</div>		




<script type="text/javascript" src="js/vue.js"></script>	
<script type="text/javascript" src="js/axios.min.js"></script>
<script type="text/javascript" src="js/qs.js"></script>
<script type="text/javascript">

let vm=new Vue({
	el:'#yc_add',
	data:{
		films:[],
		fname:'',
		ftype:'',
		fdate:'',
		fyear:'',
		director:'',
		actors:'',
		fimage:'',
		farea:'',
		flength:'',
		fdis:'',
		film:{} //存储添加电影信息
	},
	//挂在前执行的代码
	mounted:function(){
		axios.all([findAll()]).then(
				axios.spread((fn1)=>{
					console.log(fn1);
					this.films=fn1.data;
				}));
		
	},
	methods:{
		deleteFilm:function(fid){
			alert(fid);
		},
		add:function(){
			axios.post("film.action",qs.stringify({
				op:'add',fname:this.fname,ftype:this.ftype,director:this.director,actors:this.actors,flenth:this.flenth,
				fyear:this.fyear,fdate:this.fdate,fdis:this.fdis,farea:this.farea,fimage:this.fimage
			})).then((result)=>{
				if(result.data.code==1){
					this.film.fname=this.fname;
					this.film.ftype=this.ftype;
					this.film.director=this.director;
					this.film.actors=this.actors;
					this.film.flenth=this.flenth;
					this.film.fyear=this.fyear;
					this.film.fdate=this.fdate;
					this.film.fdis=this.fdis;
					this.film.farea=this.farea;
					this.film.fimage=this.fimage;
					//添加到film数组中
					this.films.push(this.film);
				
				}else{
					alert('添加失败');
				}
				
			});
		}
	}
	
});


//查看所有电影信息
function findAll(){
	return axios.get("film.action?op=findAll");
}

//检查用户是否登录
function checkAdminLogin(){
	
}

</script>
</body>
</html>